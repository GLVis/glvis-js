# Web version of GLVis

The _index.html_ page in this directory contains a fully-featured web version of GLVis, also available at
https://glvis.org/live

## Loading local and external files

The web version of GLVis can be used to load local files in the [`glvis*.saved` format](https://glvis.org/options-and-use/#server-mode),
which can be generated by the `-mac` option of the desktop version. See the `Load File` button in
the `Setup` tab of the _index.html_ page and https://glvis.org/live. This is analogous to the `-saved` option
of the desktop version.

The web version of GLVis can also load local or remote streams by directly parsing the `stream` HTML argument
in the format: `<site>/live?stream=<url>`.
For example, https://glvis.org/live?stream=https://glvis.org/data/ex9.saved will fetch _ex9.saved_
from glvis.org and render it instead of the normal _quad.saved_ on startup. The same can be done with
data from an external site or if you're hosting locally after running [`make servewide`](../README.md#serving-to-a-device-on-your-local-network):
https://localhost:8000/live/stream=https://glvis.org/data/ex9.saved

## Loading streams from MFEM

Just like the desktop version, the web version of GLVis can also be used to view MFEM visualization streams
via the `../glvis-browser-server` script, which forwards MFEM streams to the _index.html_ page or
https://glvis.org/live using websockets.

The connection is established in the `Setup` menu of the web version, which has controls for connecting to and
disconnecting from a `glvis-browser-server` along with pausing and resuming the rendering of incoming messages
(e.g. in from a time-dependent MFEM simulation).

Example usages:

1. `cd glvis-js && ./glvis-browser-server`

   - Requires Python 3.6.1+ and [`websockets`](https://websockets.readthedocs.io/en/stable/index.html) (available via `pip`).
   - Assumes default MFEM port of `19916`.

2. Visit https://glvis.org/live or open `glvis-js/live` in a browser

3. Open the `Setup` menu and click the `Connect` button

   - Default host and websocket port are `localhost:8080`.
   - There is a `Pause`/`Resume` button below the `Connect` button that can be used to pause the stream or,
     in the case that a "pause" message was sent, resume the stream.
   - Does not currently work in Safari from https://glvis.org/live (seems to require a secure websocket).

4. `cd mfem/examples && ./ex9` in a separate terminal

5. `Ctrl-c` to stop `glvis-browser-server`

## Fullscreen mode

In the lower-right corner of the web version there is a `â¤¢` button for expanding to fullscreen.
In fullscreen all elements besides the visualization itself are hidden, follow your browsers
instructions or use the `esc` key to exit.
